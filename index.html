<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Christmas 2025</title>
    <style>
        /* 1. åŸºç¡€æ ·å¼ */
        body {
            margin: 0; padding: 0;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            color: #fff;
            font-family: 'Microsoft YaHei', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer;
        }

        /* 2. è§†é¢‘å±‚ */
        #video-overlay {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 20000;
        }
        #christmas-video { width: 100%; height: 100%; object-fit: contain; background-color: #000; }
        .exit-video {
            position: absolute; top: 20px; right: 20px;
            background: rgba(255,255,255,0.3); color: white; border: none;
            padding: 10px 20px; border-radius: 20px; cursor: pointer; z-index: 20001;
        }

        /* 3. æç¤ºæµ®å±‚ */
        #music-tip, #tip_window {
            position: fixed; padding: 12px 25px; border-radius: 30px;
            font-size: 0.9rem; z-index: 1000; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: bounce 2s infinite; transition: opacity 0.5s;
        }
        #music-tip { top: 20px; background: #ff4d4d; border: 1px solid #fff; }
        #tip_window { top: 80px; background: #2d5a27; display: none; }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* 4. åœ£è¯å†…å®¹ */
        h1 { font-size: 3rem; color: #ff4d4d; text-shadow: 0 0 20px #ff4d4d; margin: 10px 0; z-index: 10; }
        .countdown-container { display: flex; gap: 15px; margin-bottom: 30px; z-index: 10; }
        .time-box { text-align: center; }
        .time-box span { font-size: 2rem; font-weight: bold; color: #fff; display: block; }
        .time-box p { margin: 0; font-size: 0.7rem; color: #ff4d4d; }

        /* åœ£è¯æ ‘ & æ˜Ÿæ˜Ÿ */
        .tree { position: relative; width: 160px; height: 220px; margin: 20px 0; }
        .tree-layer { width: 0; height: 0; border-left: 80px solid transparent; border-right: 80px solid transparent; border-bottom: 80px solid #2d5a27; position: absolute; z-index: 10; }
        .l1 { top: 0; border-left-width: 40px; border-right-width: 40px; left: 40px; }
        .l2 { top: 40px; border-left-width: 60px; border-right-width: 60px; left: 20px; }
        .l3 { top: 80px; border-left-width: 80px; border-right-width: 80px; }
        
        /* æ—‹è½¬æ˜Ÿæ˜Ÿåœ¨æœ€å‰é¢ */
        .star { 
            position: absolute; top: -35px; left: 62px; color: gold; font-size: 40px; 
            z-index: 100; /* é«˜å±‚çº§ */
            text-shadow: 0 0 15px gold;
            animation: star-spin 3s linear infinite;
            transform-style: preserve-3d;
        }
        @keyframes star-spin { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }

        .trunk { width: 30px; height: 40px; background: #5d4037; position: absolute; bottom: 30px; left: 65px; }
        .music-icon { position: fixed; top: 25px; right: 25px; font-size: 30px; display: none; animation: rotating 3s linear infinite; z-index: 100; }
        @keyframes rotating { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .snowflake { position: fixed; top: -10px; color: white; pointer-events: none; z-index: 1; }

        /* 5. å¼¹çª— */
        #modal_overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; backdrop-filter: blur(5px); }
        #surprise_modal { 
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            width: 80%; max-width: 320px; background: #fff; color: #333; padding: 40px 20px; 
            border-radius: 25px; text-align: center; z-index: 10001; border: 4px solid #ff4d4d;
        }
        .modal-btn { margin-top: 25px; padding: 10px 30px; background: #ff4d4d; color: white; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body onclick="playMusic()">

    <!-- å…¨å±è§†é¢‘å±‚ -->
    <div id="video-overlay">
        <button class="exit-video" onclick="closeVideo(event)">è·³è¿‡è§†é¢‘</button>
        <video id="christmas-video" playsinline>
            <!-- ç¡®ä¿ä½ çš„ä»“åº“æ ¹ç›®å½•æœ‰è¿™ä¸ªæ–‡ä»¶ -->
            <source src="christmas.mp4" type="video/mp4">
        </video>
    </div>

    <div id="music-tip">ä½ æˆ³æˆ‘ä¸€ä¸‹å™»ï¼ˆğŸ§ï¼‰</div>
    <div id="tip_window" onclick="showSurprise(event)">ğŸ˜„ ä¹Ÿå® å¹¸æˆ³æˆ‘ä¸€ä¸‹å‘— æœ‰æƒŠå–œå¼ ğŸ„</div>

    <div id="modal_overlay"></div>
    <div id="surprise_modal">
        <h2 id="modal_title" style="color: #ff4d4d; margin: 0;">ğŸ… ğŸ¦Œ ğŸ ğŸ„ ğŸ¤Ÿ ğŸ‘§ ğŸ¤™ ğŸ¤</h2> 
        <p id="blessing_text" style="font-size: 1.1rem; line-height: 1.6; margin-top: 20px;">åŠ è½½ä¸­...</p>
        <button id="next_btn" class="modal-btn" onclick="handleNextBlessing()">å¿«ä¹ç­¾æ”¶ğŸ˜˜</button>
    </div>

    <div class="music-icon" id="mIcon">ğŸµ</div>
    <h1>Merry Christmas</h1>

    <div class="tree" id="christmasTree">
        <div class="star">â˜…</div>
        <div class="tree-layer l1"></div>
        <div class="tree-layer l2"></div>
        <div class="tree-layer l3"></div>
        <div class="trunk"></div>
    </div>

    <div class="countdown-container">
        <div class="time-box"><span id="days">00</span><p>æ—¥</p></div>
        <div class="time-box"><span id="hours">00</span><p>æ—¶</p></div>
        <div class="time-box"><span id="minutes">00</span><p>åˆ†</p></div>
        <div class="time-box"><span id="seconds">00</span><p>ç§’</p></div>
    </div>

    <p style="letter-spacing: 3px; color: #888; z-index: 10;">â™¥ï¸ å¥åº· å¼€å¿ƒ æŒ£æ¯›æ¯› ğŸ’°</p>
 
    <audio id="bgm" loop>
        <source src="https://online1.tingclass.net/music/shi0529/lastchristmas.mp3" type="audio/mpeg">
    </audio>

    <script>
        const blessingList = [
             "å®ï¼ä½ çš„åœ£è¯ç¥ç¦å·²åˆ°è´§ï¼Œè¯·è€å¿ƒå›å¤â€˜å¿«ä¹â€™ç­¾æ”¶ï¼Œå¦åˆ™åœ£è¯è€äººä¼šç”Ÿæ°”å“¦",
            "åœ£è¯è€äººé©¾ç€é©¬è½¦æ‰˜æˆ‘ç¥ä½ ",
            "2026å¹´é’±åŒ…åƒåœ£è¯è€äººçš„å£è¢‹ä¸€æ ·ï¼Œæ°¸è¿œè£…ä¸æ»¡ï¼",
            "æ‰€æœ‰çš„çƒ¦æ¼éƒ½åƒå†¬å¤©çš„é›ªèŠ±ï¼Œé‡å…‰å³åŒ–ï¼Œå¹³å®‰å–œä¹ï¼",
            "åƒä¸èƒ–ã€ç¡å¾—é¦™ï¼Œçˆ±çš„äººä¹Ÿæ­£å¥½åœ¨èº«è¾¹ã€‚",
            "å¿«ä¹æ²¡ç­¾æ”¶å¤Ÿå–ï¼åˆ«ç€æ€¥å˜›ï¼è¿˜æ²¡åˆ°åœ£è¯èŠ‚å‘¢ï¼Œä½ å†ç»§ç»­æˆ³ä¸€æˆ³ğŸ‘‡",
            "æ„¿ä½ ï¼šæœ‰ç³–åƒï¼Œæœ‰æ¢¦è¿½ï¼Œæœ‰äººçˆ±ï¼Œæœ‰å…‰è¿½ âœ¨",
            "ç³»ç»Ÿæç¤ºï¼šæ‚¨çš„åœ£è¯å¿«ä¹å·²å‡çº§ä¸ºâ€˜VIPå°Šäº«ç‰ˆâ€™ï¼Œæœ‰æ•ˆæœŸï¼šä¸€ç”Ÿï¼â™¥ï¸",
            "æ‚¨è®¢è´­çš„â€˜2026å¹´å¹¸ç¦â€™åœ¨æ´¾é€ä¸­ï¼Œé¢„è®¡åˆ°è¾¾æ—¶é—´â€”â€”æ‰‹æŒ‡å‘é€ä¿¡æ¯ï¼Œæˆ‘å¸®ä½ æŸ¥çœ‹è®¢å•è¿›åº¦ï¼ğŸ“¦",
            "å“å‘¦ï¼è¿˜è¦å•Šï¼æ²¡å¼€å¿ƒå¤Ÿå•Šï¼é‚£æˆ‘å¯è¿˜æœ‰å¥½å¤šå¥½å¤šï¼Œè¦ä¸ç›¸çº¦å…ƒæ—¦ğŸ»",
            "æ¸©é¦¨æç¤ºï¼šå€’è®¡æ—¶ç»“æŸè®°å¾—æ¥é¢†å–ä½ çš„VIPğŸå–”ï¼Œç»å¯¹æƒŠå–œ"
        ];
        let currentStep = 0;
        let videoTriggered = false;
        const targetDate = new Date(2025, 11, 25); // 2025å¹´12æœˆ25æ—¥

        const bgm = document.getElementById('bgm');
        const videoOverlay = document.getElementById('video-overlay');
        const video = document.getElementById('christmas-video');
        const mTip = document.getElementById('music-tip');
        const mTipWindow = document.getElementById('tip_window');
        const modal = document.getElementById('surprise_modal');
        const blessingText = document.getElementById('blessing_text');
        const nextBtn = document.getElementById('next_btn');

        window.onload = () => {
            checkAndRunCountdown();
            startSnowing();
            createLights();
        };

        // --- æ ¸å¿ƒä¿®æ”¹ï¼šç”¨æˆ·ç‚¹å‡»é¡µé¢æ—¶çš„é€»è¾‘ ---
        function playMusic() {
            const now = new Date();
            
            if (now >= targetDate) {
                // æƒ…å†µ Aï¼šæ‰“å¼€ç½‘é¡µæ—¶å·²ç»æ˜¯åœ£è¯èŠ‚ï¼Œç›´æ¥æ”¾è§†é¢‘
                if (!videoTriggered) {
                    triggerChristmasVideo();
                }
            } else {
                // æƒ…å†µ Bï¼šè¿˜æ²¡åˆ°åœ£è¯èŠ‚ï¼Œæ’­èƒŒæ™¯éŸ³ä¹
                if (bgm.paused && videoOverlay.style.display !== 'block') {
                    bgm.play().then(() => {
                        mTip.style.display = 'none';
                        mTipWindow.style.display = 'block';
                        document.getElementById('mIcon').style.display = 'block';
                    });
                }
            }
        }

        // --- æ ¸å¿ƒä¿®æ”¹ï¼šå€’è®¡æ—¶å®æ—¶ç›‘æ§ ---
        function checkAndRunCountdown() {
            const update = () => {
                const now = new Date();
                const diff = targetDate - now;

                if (diff <= 0) {
                    document.querySelectorAll('.time-box span').forEach(s => s.innerText = "00");
                    // å€’è®¡æ—¶ç»“æŸç¬é—´åˆ‡æ¢è§†é¢‘
                    if (!videoTriggered) {
                        triggerChristmasVideo();
                    }
                } else {
                    document.getElementById('days').innerText = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2,'0');
                    document.getElementById('hours').innerText = Math.floor((diff / (1000 * 60 * 60)) % 24).toString().padStart(2,'0');
                    document.getElementById('minutes').innerText = Math.floor((diff / (1000 * 60)) % 60).toString().padStart(2,'0');
                    document.getElementById('seconds').innerText = Math.floor((diff / 1000) % 60).toString().padStart(2,'0');
                }
            };
            setInterval(update, 1000);
            update();
        }

        function triggerChristmasVideo() {
            videoTriggered = true;
            bgm.pause(); // åœæ­¢éŸ³ä¹
            mTip.style.display = 'none';
            videoOverlay.style.display = 'block'; // æ˜¾ç¤ºè§†é¢‘å±‚
            video.play().catch(e => console.log("ç­‰å¾…ç”¨æˆ·äº¤äº’åæ’­æ”¾è§†é¢‘"));
        }

        function closeVideo(event) {
            event.stopPropagation();
            video.pause();
            videoOverlay.style.display = 'none';
            // å¦‚æœè¿˜æ²¡è¿‡åœ£è¯èŠ‚ï¼Œè§†é¢‘å…³äº†å¯ä»¥ç»§ç»­æ’­BGM
            if (new Date() < targetDate) bgm.play();
        }

        // --- å¼¹çª— & è£…é¥°é€»è¾‘ ---
        function showSurprise(event) {
            if (!videoTriggered) {
                    triggerChristmasVideo();
                }
           /* event.stopPropagation();
            currentStep = 0;
            updateModalContent();
            modal.style.display = "block";
            document.getElementById('modal_overlay').style.display = "block";*/
        }

        function handleNextBlessing() {
            currentStep++;
            if (currentStep < blessingList.length) updateModalContent();
            /*else closeModal();*/
        }

        function updateModalContent() {
            blessingText.innerText = blessingList[currentStep];
            
            // å¦‚æœæ˜¯æœ€åä¸€æ¡ï¼Œå¯ä»¥æ”¹å˜æŒ‰é’®æ–‡å­—
            if (currentStep === blessingList.length - 1) {
                nextBtn.innerText = "æˆ³ä¸åŠ¨äº†ï¼Œé‚£è§é¢æˆ³å§ğŸ˜Š";
            }else if(currentStep === 5){
                nextBtn.innerText = "å¿«ç‚¹æˆ‘ï¼Œåé¢è€ç²¾å½©å•¦ğŸ˜„";
            }else {
                nextBtn.innerText = "å¿«ä¹ç­¾æ”¶ğŸ˜˜";
            }
        }

        function closeModal() {
            modal.style.display = "none";
            document.getElementById('modal_overlay').style.display = "none";
        }

        function startSnowing() {
            setInterval(() => {
                const snowflake = document.createElement('div');
                snowflake.innerHTML = 'â„'; snowflake.className = 'snowflake';
                snowflake.style.left = Math.random() * window.innerWidth + 'px';
                snowflake.style.fontSize = Math.random() * 15 + 10 + 'px';
                document.body.appendChild(snowflake);
                const duration = Math.random() * 3000 + 4000;
                snowflake.animate([{ transform: 'translateY(0)' }, { transform: `translateY(${window.innerHeight}px)` }], { duration: duration });
                setTimeout(() => snowflake.remove(), duration);
            }, 150);
        }

        function createLights() {
            const tree = document.getElementById('christmasTree');
            const colors = ['#ff0000', '#ffff00', '#0000ff', '#ffffff'];
            for (let i = 0; i < 18; i++) {
                const light = document.createElement('div');
                light.style.cssText = `position:absolute; width:6px; height:6px; border-radius:50%; background:${colors[i%4]}; top:${Math.random()*150+20}px; left:${Math.random()*110+25}px; box-shadow:0 0 10px white; animation: blink ${Math.random()+0.5}s infinite alternate; z-index:20;`;
                tree.appendChild(light);
            }
        }
        const style = document.createElement('style');
        style.innerHTML = `@keyframes blink { from { opacity: 0.3; } to { opacity: 1; } }`;
        document.head.appendChild(style);
    </script>
</body>
</html>
