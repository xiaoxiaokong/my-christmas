<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Christmas - åœ£è¯å€’è®¡æ—¶</title>
    <style>
        /* 1. åŸºç¡€æ ·å¼ */
        body {
            margin: 0; padding: 0;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            color: #fff;
            font-family: 'Microsoft YaHei', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* 2. æ’­æ”¾æç¤ºé®ç½© */
        #play-hint {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s;
        }
        #play-hint.hidden { opacity: 0; pointer-events: none; }
        .hint-btn {
            padding: 18px 35px; font-size: 1.4rem; background: #ff4d4d;
            border: none; border-radius: 50px; color: white; cursor: pointer;
            box-shadow: 0 0 25px #ff4d4d; transition: transform 0.3s;
        }
        .hint-btn:hover { transform: scale(1.1); }

        /* 3. éŸ³ä¹æ—‹è½¬å›¾æ ‡ */
        .music-icon {
            position: fixed; top: 25px; right: 25px;
            font-size: 30px; z-index: 100;
            animation: rotating 3s linear infinite;
            display: none; cursor: pointer;
        }
        .paused { animation-play-state: paused; opacity: 0.5; }
        @keyframes rotating { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* 4. æ ‡é¢˜ */
        h1 { font-size: 2.5rem; color: #ff4d4d; text-shadow: 0 0 20px #ff4d4d; margin-bottom: 10px; z-index: 10; }

        /* 5. å€’è®¡æ—¶æ ·å¼ */
        #countdown-box {
            display: none; /* åˆå§‹éšè—ï¼Œç‚¹å‡»åæ˜¾ç¤º */
            flex-direction: row;
            gap: 15px;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 10;
            animation: fadeIn 2s;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .time-item { text-align: center; min-width: 50px; }
        .time-item span { font-size: 1.8rem; font-weight: bold; color: #ff4d4d; display: block; }
        .time-item p { margin: 0; font-size: 0.7rem; color: #ccc; text-transform: uppercase; }

        /* 6. åœ£è¯æ ‘ */
        .tree { position: relative; width: 140px; height: 180px; margin-top: 20px; }
        .tree-layer { width: 0; height: 0; border-left: 70px solid transparent; border-right: 70px solid transparent; border-bottom: 70px solid #2d5a27; position: absolute; }
        .l1 { top: 0; border-left-width: 35px; border-right-width: 35px; left: 35px; }
        .l2 { top: 35px; border-left-width: 55px; border-right-width: 55px; left: 15px; }
        .l3 { top: 70px; border-left-width: 70px; border-right-width: 70px; }
        
        .light {
            position: absolute; width: 5px; height: 5px; border-radius: 50%;
            z-index: 5; animation: blink 1s infinite alternate;
        }
        @keyframes blink { from { opacity: 0.3; } to { opacity: 1; } }

        .star { position: absolute; top: -25px; left: 54px; color: gold; font-size: 35px; animation: starGlow 1s infinite alternate; z-index: 6; }
        @keyframes starGlow { from { text-shadow: 0 0 5px #fff; } to { text-shadow: 0 0 20px gold; } }

        .snowflake { position: fixed; top: -10px; color: white; pointer-events: none; z-index: 1; }
    </style>
</head>
<body>

    <!-- å¯åŠ¨é®ç½© -->
    <div id="play-hint" onclick="startEverything()">
        <button class="hint-btn">ğŸ„ ç‚¹å‡»å¼€å¯åœ£è¯æƒŠå–œ ğŸ</button>
        <p style="color: #666; margin-top: 15px;">2025 Christmas Celebration</p>
    </div>

    <!-- éŸ³ä¹æ§åˆ¶ -->
    <div class="music-icon" id="mIcon" onclick="toggleMusic(event)">ğŸµ</div>

    <h1>Merry Christmas</h1>

    <!-- åœ£è¯æ ‘ -->
    <div class="tree" id="christmasTree">
        <div class="star">â˜…</div>
        <div class="tree-layer l1"></div>
        <div class="tree-layer l2"></div>
        <div class="tree-layer l3"></div>
    </div>

    <!-- å€’è®¡æ—¶æ¨¡å— -->
    <div id="countdown-box">
        <div class="time-item"><span id="days">00</span><p>å¤©</p></div>
        <div class="time-item"><span id="hours">00</span><p>æ—¶</p></div>
        <div class="time-item"><span id="minutes">00</span><p>åˆ†</p></div>
        <div class="time-item"><span id="seconds">00</span><p>ç§’</p></div>
    </div>

    <audio id="bgm" loop>
        <source src="https://online1.tingclass.net/music/shi0529/lastchristmas.mp3" type="audio/mpeg">
    </audio>

    <script>
        const bgm = document.getElementById('bgm');
        const hint = document.getElementById('play-hint');
        const icon = document.getElementById('mIcon');
        const countdownBox = document.getElementById('countdown-box');

        // æ ¸å¿ƒå‡½æ•°ï¼šå¯åŠ¨æ‰€æœ‰æ•ˆæœ
        function startEverything() {
            bgm.play().then(() => {
                hint.classList.add('hidden'); // éšè—é®ç½©
                icon.style.display = 'block'; // æ˜¾ç¤ºéŸ³ä¹å›¾æ ‡
                countdownBox.style.display = 'flex'; // æ˜¾ç¤ºå€’è®¡æ—¶
                
                startSnowing();   // å¼€å§‹ä¸‹é›ª
                createLights();   // ç”Ÿæˆå½©ç¯
                updateCountdown(); // ç«‹å³è®¡ç®—ä¸€æ¬¡å€’è®¡æ—¶
                setInterval(updateCountdown, 1000); // å¼€å¯ç§’çº§æ›´æ–°
            }).catch(e => console.log("ç­‰å¾…äº¤äº’..."));
        }

        // å€’è®¡æ—¶é€»è¾‘
        function updateCountdown() {
            const now = new Date();
            const currentYear = now.getFullYear();
            // è®¾å®šç›®æ ‡æ—¥æœŸä¸ºå½“å¹´çš„ 12 æœˆ 25 æ—¥ 00:00:00
            let target = new Date(currentYear, 11, 25); 

            // å¦‚æœä»Šå¹´çš„åœ£è¯èŠ‚å·²ç»è¿‡äº†ï¼Œå°±è®¡ç®—æ˜å¹´çš„
            if (now > target) {
                target = new Date(currentYear + 1, 11, 25);
            }

            const diff = target - now; // æ¯«ç§’å·®

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const m = Math.floor((diff / (1000 * 60)) % 60);
            const s = Math.floor((diff / 1000) % 60);

            // æ›´æ–°åˆ°é¡µé¢ï¼Œè¡¥é½ä¸¤ä½æ•°
            document.getElementById('days').innerText = d.toString().padStart(2, '0');
            document.getElementById('hours').innerText = h.toString().padStart(2, '0');
            document.getElementById('minutes').innerText = m.toString().padStart(2, '0');
            document.getElementById('seconds').innerText = s.toString().padStart(2, '0');
        }

        // éŸ³ä¹å¼€å…³
        function toggleMusic(event) {
            event.stopPropagation();
            if (bgm.paused) {
                bgm.play();
                icon.classList.remove('paused');
            } else {
                bgm.pause();
                icon.classList.add('paused');
            }
        }

        // è£…é¥°ç¯
        function createLights() {
            const tree = document.getElementById('christmasTree');
            const colors = ['#ff0000', '#ffff00', '#0000ff', '#ffffff', '#ff69b4'];
            for (let i = 0; i < 15; i++) {
                const light = document.createElement('div');
                light.className = 'light';
                light.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                light.style.top = Math.random() * 120 + 20 + 'px';
                light.style.left = Math.random() * 80 + 30 + 'px';
                light.style.animationDelay = Math.random() + 's';
                tree.appendChild(light);
            }
        }

        // ä¸‹é›ª
        function startSnowing() {
            setInterval(() => {
                const snowflake = document.createElement('div');
                snowflake.innerHTML = 'â„';
                snowflake.className = 'snowflake';
                snowflake.style.left = Math.random() * window.innerWidth + 'px';
                snowflake.style.fontSize = Math.random() * 15 + 10 + 'px';
                snowflake.style.opacity = Math.random();
                document.body.appendChild(snowflake);

                const duration = Math.random() * 3000 + 4000;
                snowflake.animate([
                    { transform: 'translateY(0) rotate(0deg)' },
                    { transform: `translateY(${window.innerHeight}px) rotate(360deg)` }
                ], { duration: duration, easing: 'linear' });

                setTimeout(() => snowflake.remove(), duration);
            }, 100);
        }
    </script>
</body>
</html>
